<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Perfume Shelf</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Root-absolute paths ✅ -->
  <link rel="stylesheet" href="/static/styles.css" />

</head>

<body>
  <video class="lights-bg" autoplay muted loop playsinline preload="metadata">
    <source src="/static/lights.mp4" type="video/mp4" />
  </video>

  <header class="site-header">
    <div class="site-header-inner">
      <a href="/" class="brand">
        <span class="brand-word">My</span>
        <span class="brand-word strong">Perfume</span>
        <span class="brand-word">Shelf</span>
      </a>
      


      <nav class="global-nav">
        <ul>
          <li><a href="/" data-link="collection">Collection</a></li>
          <li><a href="/wishlist" data-link="wishlist">Wishlist</a></li>
        </ul>
      </nav>

      <div class="header-actions">
        <input id="search" type="search"
               placeholder="Search perfumes… (press / to focus)" autocomplete="on" />
        <label class="badge edit-toggle">
          <input id="editToggle" type="checkbox" />
          <span class="switch"><span class="knob"></span></span>
          <span class="label">Edit mode</span>
        </label>
        <button class="badge" id="logoutBtn" type="button">Logout</button>
      </div>
    </div>
    
  </header>

  <main class="container">
    <form id="addForm" class="panel edit-only">
      <input name="name"  placeholder="Name"  required />
      <input name="brand" placeholder="Brand" required />
      <input name="price" placeholder="Price (optional)" />
      <input name="img" id="imgPath" placeholder="Image path (auto-filled when you upload)" />
      <input type="file" id="imgFile" accept=".jpg,.jpeg,.png,.webp,.heic,.heif,.avif" />
      <div class="preview hidden" id="imgPreviewWrap">
        <img id="imgPreview" alt="Preview" />
      </div>
      <input name="notes" placeholder="Notes (optional)" />
      <button type="submit" class="badge">Add / Update</button>
    </form>

    <div id="grid" class="grid"></div>
  </main>

  <!-- Root-absolute path ✅ -->
  <script src="/static/app.js" defer></script>

  <div id="zoomBox" class="zoom"></div>

  <script>
    (function(){
      const mode = (window.PAGE_MODE === "wishlist") ? "wishlist" : "collection";
      document.querySelectorAll('a[href="/"], a[href="/wishlist"]').forEach(a=>{
        const isCollection = a.getAttribute('href') === '/';
        const isWishlist   = a.getAttribute('href') === '/wishlist';
        a.classList.toggle('active',
          (mode === 'collection' && isCollection) ||
          (mode === 'wishlist' && isWishlist)
        );
      });
    })();
  </script>
<!-- Login Modal -->
<div id="loginModal" class="modal hidden">
  <div class="modal-content">
    <h2>Login Required</h2>
    <form id="loginForm">
      <label>
        Username
        <input id="loginUser" type="text" required />
      </label>
      <label>
        Password
        <input id="loginPass" type="password" required />
      </label>
      <div class="modal-actions">
        <button type="submit" class="badge">Login</button>
        <button type="button" id="loginCancel" class="badge secondary">Cancel</button>
      </div>
    </form>
  </div>
</div>
<!-- Confirm Modal -->
<div id="confirmModal" class="modal hidden" aria-hidden="true">
  <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
    <h2 id="confirmTitle">Confirm</h2>
    <p id="confirmMessage" style="margin:.5rem 0 1rem;color:#ddd;">Are you sure?</p>
    <div class="modal-actions">
      <button type="button" id="confirmCancel" class="badge secondary">Cancel</button>
      <button type="button" id="confirmOk" class="badge">Yes</button>
    </div>
  </div>
</div>

<!-- Toasts -->
<div id="toastHost" class="toast-host"></div>


</body>

</html>

